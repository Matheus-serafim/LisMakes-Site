const btnMenu = document.querySelector(".btn-menu"); const categorias = document.querySelector(".categorias"); const linksCategorias = document.querySelectorAll(".categorias a"); const cards = document.querySelectorAll(".card"); const inputBusca = document.querySelector(".barra-pesquisa input"); const btnCarrinho = document.querySelector(".carrinho-flutuante"); const modalCarrinho = document.querySelector("#modal-carrinho"); const fecharCarrinho = document.querySelector(".fechar-carrinho"); const listaCarrinho = document.querySelector(".lista-carrinho"); const totalSpan = document.querySelector("#total"); const limparBtn = document.querySelector(".limpar-carrinho"); const botoesComprar = document.querySelectorAll(".btn-comprar"); const contadorCarrinho = document.querySelector(".contador-carrinho"); let carrinho = []; try { carrinho = JSON.parse(localStorage.getItem("carrinho")) || []; } catch { carrinho = []; } let categoriaAtiva = "todos"; /* ---------- FUN√á√ïES ---------- */ function salvarCarrinho() { localStorage.setItem("carrinho", JSON.stringify(carrinho)); } function atualizarContador() { const totalQtd = carrinho.reduce((s, i) => s + i.qtd, 0); contadorCarrinho.textContent = totalQtd; } function filtrarProdutos() { const texto = inputBusca.value.toLowerCase(); cards.forEach(card => { const nomeProduto = card.querySelector("h3").textContent.toLowerCase(); const categoriaProduto = card.dataset.categoria; const bateTexto = nomeProduto.includes(texto); const bateCategoria = categoriaAtiva === "todos" || categoriaProduto === categoriaAtiva; card.style.display = bateTexto && bateCategoria ? "block" : "none"; }); } function renderizarCarrinho() { listaCarrinho.innerHTML = ""; let total = 0; carrinho.forEach((item, index) => { total += item.preco * item.qtd; const div = document.createElement("div"); div.classList.add("item-carrinho"); const spanNome = document.createElement("span"); spanNome.textContent = ${item.nome} (x${item.qtd}); const spanPreco = document.createElement("span"); spanPreco.textContent = R$ ${(item.preco * item.qtd).toFixed(2)}; const btnRemover = document.createElement("button"); btnRemover.textContent = "‚ùå"; btnRemover.addEventListener("click", () => removerItem(index)); spanPreco.appendChild(btnRemover); div.appendChild(spanNome); div.appendChild(spanPreco); listaCarrinho.appendChild(div); }); totalSpan.textContent = R$ ${total.toFixed(2)}; } function removerItem(index) { carrinho.splice(index, 1); salvarCarrinho(); atualizarContador(); renderizarCarrinho(); } /* ---------- EVENTOS ---------- */ /* Menu categorias */ btnMenu.addEventListener("click", () => categorias.classList.toggle("ativa")); linksCategorias.forEach(link => { link.addEventListener("click", e => { e.preventDefault(); categoriaAtiva = link.dataset.categoria; linksCategorias.forEach(l => l.classList.remove("ativo")); link.classList.add("ativo"); filtrarProdutos(); }); }); /* Busca por texto */ inputBusca.addEventListener("input", filtrarProdutos); /* Bot√µes comprar */ botoesComprar.forEach(botao => { botao.addEventListener("click", () => { const nome = botao.dataset.nome; const preco = parseFloat(botao.dataset.preco); const existente = carrinho.find(item => item.nome === nome); if (existente) { existente.qtd++; } else { carrinho.push({ nome, preco, qtd: 1 }); } salvarCarrinho(); atualizarContador(); botao.classList.add("adicionado"); setTimeout(() => botao.classList.remove("adicionado"), 400); }); }); /* Abrir e fechar modal */ btnCarrinho.addEventListener("click", () => { modalCarrinho.classList.add("ativo"); renderizarCarrinho(); }); fecharCarrinho.addEventListener("click", () => modalCarrinho.classList.remove("ativo")); modalCarrinho.addEventListener("click", e => { if (e.target === modalCarrinho) modalCarrinho.classList.remove("ativo"); }); /* Limpar carrinho */ limparBtn.addEventListener("click", () => { carrinho = []; salvarCarrinho(); atualizarContador(); renderizarCarrinho(); }); /* Finalizar pedido pelo WhatsApp */ document.querySelector(".finalizar").addEventListener("click", () => { if (carrinho.length === 0) return; let mensagem = "üõçÔ∏è *Pedido LisMakes*%0A%0A"; let total = 0; carrinho.forEach(item => { total += item.preco * item.qtd; mensagem += ‚Ä¢ ${item.nome} (x${item.qtd}) - R$ ${(item.preco * item.qtd).toFixed(2)}%0A; }); mensagem += %0A*Total:* R$ ${total.toFixed(2)}; const telefone = "5583986283024"; // seu n√∫mero window.open(https://wa.me/${telefone}?text=${mensagem}, "_blank"); }); /* Inicializa√ß√£o */ atualizarContador(); filtrarProdutos();